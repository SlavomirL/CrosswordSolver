<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/style.css}"/>
    <title>Crossword Solver App</title>
</head>

<body>
<div class="content">
    <h1>So you want to find a word without effort?</h1>
    <p>To start, tell me how many letters your desired word consists of.</p>
    <form name="wordLengthSelector" id="wordLengthForm" action="/crossword-solver/home" method="post">
        <input type="radio" id="length3" name="wordLength" value="3" style="display: none;" onclick="toggleSubmitButton()">
        <label for="length3"
               style="display: inline-block; cursor: pointer; margin-bottom: 5px; padding: 5px 10px; border: 1px solid #ccc;">3</label><br>

        <input type="radio" id="length4" name="wordLength" value="4" style="display: none;" onclick="toggleSubmitButton()">
        <label for="length4"
               style="display: inline-block; cursor: pointer; margin-bottom: 5px; padding: 5px 10px; border: 1px solid #ccc;">4</label><br>

        <div id="textInputFields"></div>
        <button id="submitButton" style="display: none"  type="submit">Confirm</button>


    </form>
    <div th:if="${stringToShow != null}" th:text="${stringToShow}"></div>
</div>

<script>
    function createTextInputFields(wordLength) {
        const container = document.getElementById('textInputFields');
        container.innerHTML = '';

        for (let i = 0; i < wordLength; i++) {
            const input = document.createElement('input');
            input.type = 'text';
            input.name = 'letters';
            input.maxLength = 1;
            input.addEventListener('input', updateString);
            container.appendChild(input);
            container.appendChild(document.createElement('br'));
        }
    }

    function updateString() {
        const inputs = document.getElementsByName('letters');
        const stringArray = Array.from(inputs).map(input => input.value || ' ');
        document.getElementById('stringToShow').textContent = stringArray.join('');
    }

    document.getElementById('wordLengthForm').addEventListener('change', function (event) {
        const wordLength = parseInt(event.target.value);
        if (!isNaN(wordLength)) {
            createTextInputFields(wordLength);
        }
    });

    function toggleSubmitButton() {
        var radios = document.getElementsByName("wordLength");
        var submitButton = document.getElementById("submitButton");
        var selected = false;

        for (var i = 0; i < radios.length; i++) {
            console.log("start looping")
            if (radios[i].checked) {
                console.log("found something")
                selected = true;
                break;
            }
        }

        if (selected) {
            console.log("everything works as expected")
            submitButton.style.display = "block";
        } else {
            console.log("something went wrong");
            submitButton.style.display = "none";
        }
    }

</script>
</body>
</html>